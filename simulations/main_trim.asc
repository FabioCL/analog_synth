Version 4
SHEET 1 3028 1300
WIRE -96 -688 -80 -704
WIRE -96 -672 -96 -688
WIRE -96 -480 -80 -496
WIRE -96 -464 -96 -480
WIRE -624 -336 -688 -336
WIRE -624 -320 -624 -336
WIRE -432 -272 -560 -272
WIRE -288 -272 -352 -272
WIRE -624 -208 -624 -224
WIRE -624 -208 -688 -208
WIRE -1824 -160 -1808 -176
WIRE -1712 -160 -1696 -176
WIRE -1584 -160 -1568 -176
WIRE -1824 -128 -1824 -160
WIRE -1712 -128 -1712 -160
WIRE -1584 -128 -1584 -160
WIRE -624 16 -688 16
WIRE -624 32 -624 16
WIRE -432 80 -560 80
WIRE -288 80 -288 -272
WIRE -288 80 -352 80
WIRE -160 128 -208 128
WIRE -48 128 -80 128
WIRE 64 128 32 128
WIRE -624 144 -624 128
WIRE -624 144 -688 144
WIRE -208 224 -208 128
WIRE -112 224 -208 224
WIRE 64 224 64 128
WIRE 64 224 -32 224
WIRE 496 256 512 240
WIRE 496 320 496 256
WIRE 656 320 496 320
WIRE 704 320 656 320
WIRE 816 320 784 320
WIRE 928 320 896 320
WIRE 992 320 928 320
WIRE -432 352 -592 352
WIRE -288 352 -288 80
WIRE -288 352 -352 352
WIRE -208 352 -208 224
WIRE -208 352 -288 352
WIRE 64 352 64 224
WIRE 176 352 64 352
WIRE 496 352 496 320
WIRE -928 368 -976 368
WIRE -976 384 -976 368
WIRE -144 480 -160 480
WIRE 496 480 496 432
WIRE 992 480 992 320
WIRE 32 496 0 496
WIRE 656 496 656 320
WIRE 752 496 656 496
WIRE 928 496 928 320
WIRE 928 496 832 496
WIRE -144 512 -144 480
WIRE -144 512 -160 512
WIRE -128 512 -144 512
WIRE 176 528 176 352
WIRE 176 528 0 528
WIRE -288 544 -288 352
WIRE -128 544 -288 544
WIRE 32 560 0 560
WIRE 176 672 176 528
WIRE 240 672 176 672
WIRE 176 704 176 672
WIRE 176 816 176 784
FLAG 32 560 Vneg
FLAG 32 496 Vpos
FLAG -592 352 Vpitch
IOPIN -592 352 In
FLAG 240 672 Vpitch_trim
IOPIN 240 672 Out
FLAG -688 144 Vneg
IOPIN -688 144 In
FLAG -688 -208 Vneg
IOPIN -688 -208 In
FLAG -688 -336 Vpos
IOPIN -688 -336 In
FLAG -688 16 Vpos
IOPIN -688 16 In
FLAG -160 480 GND
IOPIN -160 480 In
FLAG -96 -592 0
FLAG -80 -704 vpitch_error
FLAG 176 816 0
FLAG -160 512 0
FLAG -976 464 0
FLAG -928 368 Vpitch
IOPIN -928 368 Out
FLAG -1824 -48 0
FLAG -1712 -48 0
FLAG -1808 -176 Vneg
FLAG -1696 -176 Vpos
FLAG -1584 -48 0
FLAG -1568 -176 VCC
FLAG -96 -384 0
FLAG -80 -496 vpitchref
FLAG 496 480 0
FLAG 512 240 1V0_B
FLAG 992 480 0
SYMBOL AutoGenerated\\LMX58_LM2904 -64 528 R0
SYMATTR InstName U1
SYMBOL res -336 336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL res -336 -288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 100k
SYMBOL res -336 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 100k
SYMBOL bv -96 -688 R0
SYMATTR InstName B1
SYMATTR Value V=(V(vpitch_trim))-(V(vpitchref))
SYMBOL res 192 800 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL voltage -976 368 R0
WINDOW 0 49 60 Left 2
WINDOW 3 49 88 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value {vpitch_val}
SYMBOL voltage -1824 -144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value -12V
SYMBOL voltage -1712 -144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 12V
SYMBOL voltage -1584 -144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 5V
SYMBOL bv -96 -480 R0
SYMATTR InstName B2
SYMATTR Value V=-V(vpitch)*({Ru}/{Rin})
SYMBOL pot -640 16 R0
WINDOW 0 25 -22 Left 2
WINDOW 39 28 3 Left 2
SYMATTR InstName X1
SYMATTR SpiceLine R=100k val=49.171
SYMBOL pot -640 -336 R0
WINDOW 0 25 -7 Left 2
WINDOW 39 25 21 Left 2
SYMATTR InstName X2
SYMATTR SpiceLine R=100k val=50
SYMBOL voltage 496 336 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 1V
SYMBOL res 800 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 1100
SYMBOL res 912 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 8250
SYMBOL TFPT0805L2201 800 496 R0
SYMATTR SpiceLine TOL25=1 TOLslope=0
SYMATTR InstName U3
SYMBOL res -64 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1100
SYMBOL res 48 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 8250
SYMBOL TFPT0805L2201 -64 224 R0
SYMATTR SpiceLine TOL25=1 TOLslope=0
SYMATTR InstName U2
TEXT 464 136 Left 2 ;Control Voltage
TEXT -768 -376 Left 3 ;Coarse
TEXT -760 -16 Left 3 ;Fine
TEXT -736 296 Left 3 ;Pitch 1V/oct
TEXT 488 -72 Left 2 ;Note: \nTo get 1V / octave. Gain should be 18mV/V \n(required by the transistor next stage)\n \nOpamp offset fixed by course and fine tune
TEXT 624 688 Left 2 !.meas VtrimAvg AVG V(vpitch_trim)/V(vpitch)
TEXT -984 520 Left 2 !.step param vpitch_val 0.5 5 0.5
TEXT -984 552 Left 2 !.op
TEXT -984 584 Left 2 !.param Rin=100k Ru=1.8k
TEXT -240 -96 Left 2 ;Temperature compensation
TEXT -984 624 Left 2 !.TEMP 10 25 45
