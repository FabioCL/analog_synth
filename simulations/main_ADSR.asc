Version 4
SHEET 1 3072 2228
WIRE 576 -32 592 -48
WIRE 576 0 576 -32
WIRE 576 112 576 80
WIRE 704 112 576 112
WIRE 976 112 704 112
WIRE 576 128 576 112
WIRE -1168 144 -1456 144
WIRE -896 144 -1088 144
WIRE -2416 160 -2400 144
WIRE -2304 160 -2288 144
WIRE 704 160 704 112
WIRE -2208 176 -2176 144
WIRE -2416 192 -2416 160
WIRE -2304 192 -2304 160
WIRE -2208 192 -2208 176
WIRE 976 208 976 112
WIRE 976 208 768 208
WIRE -1264 240 -1248 224
WIRE -1264 272 -1264 240
WIRE -2208 304 -2208 272
WIRE -896 304 -896 144
WIRE -832 304 -896 304
WIRE 464 304 400 304
WIRE 576 304 576 208
WIRE 576 304 528 304
WIRE 704 304 704 256
WIRE 704 304 576 304
WIRE 848 304 704 304
WIRE 1152 304 912 304
WIRE -1008 320 -992 304
WIRE 16 336 32 320
WIRE -1008 352 -1008 320
WIRE 576 352 576 304
WIRE 16 368 16 336
WIRE -1264 400 -1264 352
WIRE -1152 400 -1264 400
WIRE -1264 432 -1264 400
WIRE -1648 480 -1728 480
WIRE -1456 480 -1456 144
WIRE -1456 480 -1568 480
WIRE -1424 480 -1456 480
WIRE -1328 480 -1424 480
WIRE -1008 480 -1008 432
WIRE -896 480 -896 304
WIRE -896 480 -1008 480
WIRE -864 480 -896 480
WIRE -752 480 -800 480
WIRE -704 480 -752 480
WIRE -576 480 -640 480
WIRE 16 496 16 448
WIRE 576 496 576 416
WIRE -1008 512 -1008 480
WIRE -1456 528 -1456 480
WIRE -752 544 -752 480
WIRE 288 544 80 544
WIRE 464 544 352 544
WIRE -1424 560 -1424 480
WIRE -1376 560 -1424 560
WIRE -1264 560 -1264 528
WIRE -1264 560 -1312 560
WIRE -1152 560 -1152 400
WIRE -1072 560 -1152 560
WIRE -1264 608 -1264 560
WIRE 576 608 576 560
WIRE 688 608 576 608
WIRE 832 608 752 608
WIRE 1056 608 928 608
WIRE 1152 608 1152 304
WIRE 1152 608 1056 608
WIRE 1296 608 1152 608
WIRE -240 624 -320 624
WIRE -128 624 -176 624
WIRE 16 624 16 592
WIRE 16 624 -64 624
WIRE -1008 656 -1008 608
WIRE -320 656 -320 624
WIRE 16 656 16 624
WIRE 576 656 576 608
WIRE -1456 672 -1456 608
WIRE -752 672 -752 624
WIRE 1056 672 1056 608
WIRE 1056 672 880 672
WIRE 256 704 176 704
WIRE 368 704 320 704
WIRE 464 704 464 544
WIRE 464 704 432 704
WIRE 512 704 464 704
WIRE 16 784 16 736
WIRE 48 784 16 784
WIRE 464 784 464 704
WIRE 576 832 576 752
WIRE 592 832 576 832
WIRE 464 912 464 864
WIRE 496 912 464 912
WIRE 688 992 608 992
WIRE 832 992 752 992
WIRE 1056 992 928 992
WIRE 1152 992 1152 608
WIRE 1152 992 1056 992
WIRE 1056 1056 1056 992
WIRE 1056 1056 880 1056
WIRE -1984 1264 -1968 1248
WIRE 1120 1296 1136 1280
WIRE -1984 1312 -1984 1264
WIRE -608 1312 -592 1296
WIRE 1120 1328 1120 1296
WIRE -1824 1344 -1808 1328
WIRE -608 1344 -608 1312
WIRE 1056 1376 912 1376
WIRE -288 1392 -272 1376
WIRE -1824 1408 -1824 1344
WIRE -1632 1424 -1616 1408
WIRE -288 1424 -288 1392
WIRE -2192 1456 -2320 1456
WIRE -2128 1456 -2192 1456
WIRE -1984 1456 -1984 1392
WIRE -1984 1456 -2048 1456
WIRE -1888 1456 -1984 1456
WIRE -608 1472 -608 1424
WIRE -528 1472 -608 1472
WIRE -384 1472 -448 1472
WIRE -1632 1488 -1632 1424
WIRE 1120 1488 1120 1424
WIRE 1168 1488 1120 1488
WIRE -608 1504 -608 1472
WIRE 912 1504 912 1376
WIRE -2192 1536 -2192 1456
WIRE -1824 1536 -1824 1504
WIRE -1696 1536 -1824 1536
WIRE -736 1552 -816 1552
WIRE -672 1552 -736 1552
WIRE -288 1552 -288 1504
WIRE -176 1552 -288 1552
WIRE -96 1552 -176 1552
WIRE 512 1552 400 1552
WIRE 688 1552 512 1552
WIRE 736 1552 688 1552
WIRE 848 1552 736 1552
WIRE -1824 1584 -1824 1536
WIRE -288 1584 -288 1552
WIRE -1632 1632 -1632 1584
WIRE -1584 1632 -1632 1632
WIRE -1568 1632 -1584 1632
WIRE -1440 1632 -1504 1632
WIRE -1392 1632 -1440 1632
WIRE -1264 1632 -1328 1632
WIRE -384 1632 -384 1472
WIRE -352 1632 -384 1632
WIRE 512 1632 512 1552
WIRE 688 1632 688 1552
WIRE 736 1648 736 1552
WIRE 768 1648 736 1648
WIRE 912 1648 912 1600
WIRE 912 1648 832 1648
WIRE 1120 1648 1120 1488
WIRE 1120 1648 912 1648
WIRE 1232 1648 1120 1648
WIRE 1456 1648 1312 1648
WIRE -1632 1664 -1632 1632
WIRE -2192 1680 -2192 1616
WIRE -2144 1680 -2192 1680
WIRE -608 1680 -608 1600
WIRE -1824 1696 -1824 1664
WIRE -1440 1696 -1440 1632
WIRE 1120 1712 1120 1648
WIRE -288 1728 -288 1680
WIRE 512 1744 512 1696
WIRE 608 1744 608 1696
WIRE 688 1744 688 1696
WIRE -1632 1776 -1632 1744
WIRE -1440 1824 -1440 1776
WIRE -736 1824 -736 1552
WIRE -448 1824 -736 1824
WIRE -176 1824 -176 1552
WIRE -176 1824 -368 1824
WIRE 1120 1840 1120 1792
WIRE -1984 1920 -1984 1456
WIRE -1808 1920 -1984 1920
WIRE -1584 1920 -1584 1632
WIRE -1584 1920 -1728 1920
FLAG -2416 272 0
FLAG -2304 272 0
FLAG -2400 144 Vneg
FLAG -2288 144 Vpos
FLAG -2208 304 0
FLAG -2176 144 gate_in
FLAG -1248 224 Vpos
FLAG -992 304 Vpos
FLAG -1456 672 0
FLAG -1264 608 0
FLAG -1008 656 0
FLAG -752 672 0
FLAG -1728 480 gate_in
FLAG -832 304 B
FLAG -576 480 B_plus
FLAG 592 -48 Vpos
FLAG 608 992 B
FLAG 400 304 B
FLAG 592 832 Vneg
FLAG 176 704 Q
FLAG 496 912 Vneg
FLAG 48 784 Vneg
FLAG -320 656 0
FLAG 32 320 Vpos
FLAG -1616 1408 Vpos
FLAG -1632 1776 0
FLAG -1440 1824 0
FLAG -1264 1632 A_plus
FLAG -1808 1328 Vpos
FLAG -1824 1696 0
FLAG -1968 1248 Vpos
FLAG -2144 1680 Vneg
FLAG -2320 1456 Cbuf
FLAG -592 1296 Vpos
FLAG -272 1376 Vpos
FLAG -608 1680 0
FLAG -288 1728 0
FLAG -816 1552 B_plus
FLAG -96 1552 Q
FLAG -384 1472 A_plus
FLAG 1136 1280 Vpos
FLAG 400 1552 C
FLAG 1296 608 C
FLAG 1120 1840 0
FLAG 1168 1488 Cbuf
FLAG 512 1744 0
FLAG 608 1744 0
FLAG 688 1744 0
FLAG 1456 1648 OUT
SYMBOL voltage -2416 176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value -12V
SYMBOL voltage -2304 176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value 12V
SYMBOL voltage -2208 176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 5 1 0 0 1)
SYMBOL npn -1328 432 R0
SYMATTR InstName Q1
SYMATTR Value BC847B
SYMBOL diode -704 496 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N914
SYMBOL npn -1072 512 R0
SYMATTR InstName Q2
SYMATTR Value BC847B
SYMBOL res -1280 256 R0
SYMATTR InstName R3
SYMATTR Value 39k
SYMBOL res -1024 336 R0
SYMATTR InstName R4
SYMATTR Value 39k
SYMBOL cap -800 464 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 470p
SYMBOL res -1072 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1000k
SYMBOL res -1552 464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 100k
SYMBOL res -1440 624 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R8
SYMATTR Value 39k
SYMBOL res -736 640 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R9
SYMATTR Value 39k
SYMBOL res 560 -16 R0
SYMATTR InstName R1
SYMATTR Value 3.6k
SYMBOL res 560 112 R0
SYMATTR InstName R2
SYMATTR Value 680k
SYMBOL pot 688 144 R0
WINDOW 0 66 4 Left 2
WINDOW 39 65 29 Left 2
SYMATTR InstName X1
SYMATTR SpiceLine R=1000k val=50
SYMBOL diode 528 288 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMATTR Value 1N914
SYMBOL diode 848 320 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value 1N914
SYMBOL diode 560 352 R0
SYMATTR InstName D4
SYMATTR Value 1N914
SYMBOL diode 560 496 R0
SYMATTR InstName D5
SYMATTR Value 1N914
SYMBOL diode 752 592 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D6
SYMATTR Value 1N914
SYMBOL pot 944 592 R90
WINDOW 0 -40 -11 VRight 2
WINDOW 39 -10 -182 VRight 2
SYMATTR InstName X2
SYMATTR SpiceLine R=1000k val=50
SYMBOL diode 752 976 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D7
SYMATTR Value 1N914
SYMBOL pot 944 976 R90
WINDOW 0 -45 2 VRight 2
WINDOW 39 -18 -173 VRight 2
SYMATTR InstName X3
SYMATTR SpiceLine R=1000k val=50
SYMBOL pnp 512 752 M180
SYMATTR InstName Q3
SYMATTR Value 2N2907
SYMBOL diode 368 720 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D8
SYMATTR Value 1N914
SYMBOL diode 256 720 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D9
SYMATTR Value 1N914
SYMBOL diode 288 560 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D10
SYMATTR Value 1N914
SYMBOL pot 0 480 R0
WINDOW 0 66 4 Left 2
WINDOW 39 65 29 Left 2
SYMATTR InstName X4
SYMATTR SpiceLine R=100k val=50
SYMBOL res 480 880 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 270k
SYMBOL res 32 752 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R10
SYMATTR Value 100k
SYMBOL diode -128 640 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D11
SYMATTR Value 1N914
SYMBOL diode -240 640 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D12
SYMATTR Value 1N914
SYMBOL res 32 464 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R11
SYMATTR Value 20k
SYMBOL diode -1312 544 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D13
SYMATTR Value 1N914
SYMBOL pnp -1696 1584 M180
SYMATTR InstName Q6
SYMATTR Value 2N2907
SYMBOL res -1616 1760 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R18
SYMATTR Value 39k
SYMBOL diode -1392 1648 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D16
SYMATTR Value 1N914
SYMBOL cap -1504 1616 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 470p
SYMBOL res -1424 1792 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R19
SYMATTR Value 39k
SYMBOL pnp -1888 1504 M180
SYMATTR InstName Q7
SYMATTR Value 2N2907
SYMBOL res -1808 1680 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R20
SYMATTR Value 39k
SYMBOL res -2144 1472 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R12
SYMATTR Value 270k
SYMBOL res -2000 1296 R0
SYMATTR InstName R13
SYMATTR Value 27k
SYMBOL res -1712 1904 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 1000k
SYMBOL res -2176 1632 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R15
SYMATTR Value 270k
SYMBOL npn -672 1504 R0
SYMATTR InstName Q4
SYMATTR Value BC847B
SYMBOL npn -352 1584 R0
SYMATTR InstName Q5
SYMATTR Value BC847B
SYMBOL res -624 1328 R0
SYMATTR InstName 20
SYMATTR Value 20k
SYMBOL res -304 1408 R0
SYMATTR InstName R17
SYMATTR Value 20k
SYMBOL res -352 1808 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 270k
SYMBOL npn 848 1504 R0
SYMATTR InstName Q8
SYMATTR Value BC847B
SYMBOL pnp 1056 1424 M180
SYMATTR InstName Q9
SYMATTR Value 2N2907
SYMBOL res 1136 1808 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R16
SYMATTR Value 3.6k
SYMBOL cap 624 1696 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C2
SYMATTR Value 4.7µ
SYMBOL cap 704 1696 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C4
SYMATTR Value 220n
SYMBOL cap 528 1696 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C5
SYMATTR Value 33n
SYMBOL diode 832 1632 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D14
SYMATTR Value 1N914
SYMBOL res 1216 1664 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R22
SYMATTR Value 1k
SYMBOL res -432 1456 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 270k
TEXT -2344 376 Left 2 !.tran 10 startup
TEXT -1368 -8 Left 4 ;Input SCHMITT
TEXT 656 -136 Left 4 ;ADSR driver
TEXT 608 784 Left 2 ;MMBT2907A - sot23
TEXT 64 432 Left 2 ;SUSTAIN level
TEXT 712 72 Left 2 ;ATTACK time
TEXT 800 904 Left 2 ;RELEASE time
TEXT 800 512 Left 2 ;DECAY time
TEXT -1984 1160 Left 4 ;Output SCHMITT
TEXT -696 1168 Left 4 ;Attack Flip-flop
TEXT 704 1280 Left 4 ;OUTPUT buffer
TEXT -2504 1488 Left 2 ;Cbuf is a sample of the\n output voltage
TEXT -1368 1696 Left 2 ;Goes low when ATTACK ends (Cout = 8v)
TEXT -624 432 Left 2 ;Positive pulse when B goes high
TEXT -168 1480 Left 2 ;Q keeps track of the ATTACK phase.\nbetween pulses B_plus and A_plus (turns OFF)
